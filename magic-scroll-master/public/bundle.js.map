{"version":3,"file":"bundle.js","sources":["../src/MagicScroll.js","../src/main.js"],"sourcesContent":["class MagicScroll {\n  constructor(options) {\n    Object.assign(this, options);\n\n    if (!this.target)\n      this.target =\n        document.scrollingElement ||\n        document.documentElement ||\n        document.body.parentNode ||\n        document.body; // cross browser support for document scrolling\n\n    this.speed = this.speed || 80;\n    this.smooth = this.smooth || 12;\n    this.pos = this.current || 0;\n    this.frame =\n      this.target === document.body && document.documentElement\n        ? document.documentElement\n        : this.target; // safari is the new IE\n\n    this.min = this.min || 0;\n    this.max = this.target.scrollHeight - this.target.clientHeight;\n\n    this.moving = false;\n\n    this.target.scrollTop = this.pos;\n\n    this.target.addEventListener(\"mousewheel\", scrolled, { passive: false });\n    this.target.addEventListener(\"DOMMouseScroll\", scrolled, {\n      passive: false\n    });\n    this.target.addEventListener(\n      \"scroll\",\n      e => {\n        if (!this.moving) {\n          this.pos = e.target.scrollTop;\n        }\n      },\n      { passive: false }\n    );\n    const scope = this;\n    function scrolled(e) {\n      //e.preventDefault(); // disable default scrolling\n\n      var delta = scope.normalizeWheelDelta(e);\n\n      scope.pos += -delta * scope.speed;\n      scope.pos = Math.max(0, Math.min(scope.pos, scope.max)); // limit scrolling\n\n      if (!scope.moving) scope.update();\n    }\n  }\n\n  normalizeWheelDelta(e) {\n    if (e.detail) {\n      if (e.wheelDelta)\n        return (e.wheelDelta / e.detail / 40) * (e.detail > 0 ? 1 : -1);\n      // Opera\n      else return -e.detail / 3; // Firefox\n    } else return e.wheelDelta / 120; // IE,Safari,Chrome\n  }\n\n  update() {\n    this.moving = true;\n    var delta = (this.pos - this.target.scrollTop) / this.smooth;\n\n    this.target.scrollTop += delta;\n\n    if (this.onUpdate) {\n      this.onUpdate(this.target.scrollTop);\n    }\n    const scope = this;\n    if (Math.abs(delta) > 1)\n      requestFrame(() => {\n        scope.update();\n      });\n    else this.moving = false;\n  }\n}\n\nvar requestFrame = (function() {\n  // requestAnimationFrame cross browser\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(func) {\n      window.setTimeout(func, 1000);\n    }\n  );\n})();\n\nexport default MagicScroll;\n","import MagicScroll from \"./MagicScroll.js\";\n\nlet magicScroll = new MagicScroll({\n  target: document.querySelector(\".scroll-view.after\"),\n  speed: 80,\n  smooth: 12\n});\n\nmagicScroll.onUpdate = a => {\n  console.log(a);\n  document.querySelector(\"#after-scroll\").innerHTML = Math.round(a);\n};\n\nconst beforeEl = document.querySelector(\".scroll-view.before\");\nbeforeEl.addEventListener(\"scroll\", e => {\n  document.querySelector(\"#before-scroll\").innerHTML = e.target.scrollTop;\n});\n"],"names":["requestFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","func","setTimeout","[object Object]","options","Object","assign","this","target","document","scrollingElement","documentElement","body","parentNode","speed","smooth","pos","current","frame","min","max","scrollHeight","clientHeight","moving","scrollTop","addEventListener","scrolled","passive","e","scope","delta","normalizeWheelDelta","Math","update","detail","wheelDelta","onUpdate","abs","querySelector","a","console","log","innerHTML","round"],"mappings":"yBA+EA,IAAIA,EAGAC,OAAOC,uBACPD,OAAOE,6BACPF,OAAOG,0BACPH,OAAOI,wBACPJ,OAAOK,yBACP,SAASC,GACPN,OAAOO,WAAWD,EAAM,MCtFZ,IDFlB,MACEE,YAAYC,GACVC,OAAOC,OAAOC,KAAMH,GAEfG,KAAKC,SACRD,KAAKC,OACHC,SAASC,kBACTD,SAASE,iBACTF,SAASG,KAAKC,YACdJ,SAASG,MAEbL,KAAKO,MAAQP,KAAKO,OAAS,GAC3BP,KAAKQ,OAASR,KAAKQ,QAAU,GAC7BR,KAAKS,IAAMT,KAAKU,SAAW,EAC3BV,KAAKW,MACHX,KAAKC,SAAWC,SAASG,MAAQH,SAASE,gBACtCF,SAASE,gBACTJ,KAAKC,OAEXD,KAAKY,IAAMZ,KAAKY,KAAO,EACvBZ,KAAKa,IAAMb,KAAKC,OAAOa,aAAed,KAAKC,OAAOc,aAElDf,KAAKgB,QAAS,EAEdhB,KAAKC,OAAOgB,UAAYjB,KAAKS,IAE7BT,KAAKC,OAAOiB,iBAAiB,aAAcC,EAAU,CAAEC,SAAS,IAChEpB,KAAKC,OAAOiB,iBAAiB,iBAAkBC,EAAU,CACvDC,SAAS,IAEXpB,KAAKC,OAAOiB,iBACV,SACAG,IACOrB,KAAKgB,SACRhB,KAAKS,IAAMY,EAAEpB,OAAOgB,YAGxB,CAAEG,SAAS,IAEb,MAAME,EAAQtB,KACd,SAASmB,EAASE,GAGhB,IAAIE,EAAQD,EAAME,oBAAoBH,GAEtCC,EAAMb,MAAQc,EAAQD,EAAMf,MAC5Be,EAAMb,IAAMgB,KAAKZ,IAAI,EAAGY,KAAKb,IAAIU,EAAMb,IAAKa,EAAMT,MAE7CS,EAAMN,QAAQM,EAAMI,UAI7B9B,oBAAoByB,GAClB,OAAIA,EAAEM,OACAN,EAAEO,WACIP,EAAEO,WAAaP,EAAEM,OAAS,IAAON,EAAEM,OAAS,EAAI,GAAK,IAElDN,EAAEM,OAAS,EACZN,EAAEO,WAAa,IAG/BhC,SACEI,KAAKgB,QAAS,EACd,IAAIO,GAASvB,KAAKS,IAAMT,KAAKC,OAAOgB,WAAajB,KAAKQ,OAEtDR,KAAKC,OAAOgB,WAAaM,EAErBvB,KAAK6B,UACP7B,KAAK6B,SAAS7B,KAAKC,OAAOgB,WAE5B,MAAMK,EAAQtB,KACVyB,KAAKK,IAAIP,GAAS,EACpBpC,EAAa,KACXmC,EAAMI,WAEL1B,KAAKgB,QAAS,ICzEW,CAChCf,OAAQC,SAAS6B,cAAc,sBAC/BxB,MAAO,GACPC,OAAQ,KAGEqB,SAAWG,IACrBC,QAAQC,IAAIF,GACZ9B,SAAS6B,cAAc,iBAAiBI,UAAYV,KAAKW,MAAMJ,IAGhD9B,SAAS6B,cAAc,uBAC/Bb,iBAAiB,SAAUG,IAClCnB,SAAS6B,cAAc,kBAAkBI,UAAYd,EAAEpB,OAAOgB"}